CREATE TABLE ALUNO (
    RA VARCHAR(50) NOT NULL PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL, 
    CURSO VARCHAR(100) NOT NULL,
    EMAIL VARCHAR(100) NOT NULL
)

CREATE TABLE LIVRO (
    ISBN VARCHAR(100) NOT NULL PRIMARY KEY,
    TITULO VARCHAR(100) NOT NULL,
    ANO_PUBLICACAO NUMBER NOT NULL
)

CREATE TABLE AUTOR (
    ID_AUTOR NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOME VARCHAR(100) NOT NULL,
    NACIONALIDADE VARCHAR(100)
)

CREATE TABLE LIVRO_AUTOR (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ISBN VARCHAR(100) REFERENCES LIVRO(ISBN),
    ID_AUTOR NUMBER REFERENCES AUTOR(ID_AUTOR) 
);

CREATE TABLE EXEMPLAR (
    ID_EXEMPLAR NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ESTADO VARCHAR(100) NOT NULL,
    DISPONIBILIDADE NUMBER(1) DEFAULT 1 NOT NULL,
    ISBN VARCHAR(100) REFERENCES LIVRO(ISBN)  
);

CREATE TABLE EMPRESTIMO (
    ID_EMPRESTIMO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    RA VARCHAR(100) REFERENCES ALUNO(RA),
    ID_EXEMPLAR NUMBER REFERENCES EXEMPLAR(ID_EXEMPLAR),
    DATA_RETIRADA DATE NOT NULL,
    DATA_PREVISTA DATE NOT NULL,
    DATA_DEVOLUCAO DATE NOT NULL
)
---
ALTER TABLE AUTOR ADD CONSTRAINT PK_ID_AUTOR PRIMARY KEY(ID_AUTOR);

DROP TABLE EMPRESTIMO; 

